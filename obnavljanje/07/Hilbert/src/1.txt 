--- upit ---

WITH TMP AS (
    SELECT INDEKS
    FORM DA.ISPIT I
    WHERE OCENA > 5 AND STATUS = 'o'
    GROUP BY INDEKS
    HAVING COUNT(*) = ?
)
SELECT D.INDEKS, D.IME, D.PREZIME, SP.NAZIV, P.NAZIV, OCENA
FORM DA.DOSIJE D JOIN DA.STUDIJSKIPROGRAM SP ON D.IDPROGRAMA = SP.ID
     JOIN DA.ISPIT I ON D.INDEKS = I.INDEKS
     JOIN DA.PREDMET P ON I.IDPREDMETA = P.ID
     JOIN TMP ON D.INDEKS = TMP.INDEKS
WHERE OCENA > 5 AND STATUS = 'o'
ORDER BY D.INDEKS;

---------------------------------------------------------------------------------

SELECT IME, PREZIME, DATDIPLOMIRANJA
FROM DA.DOSIJE
WHERE IDPROGRAMA = 202 AND POL='z'

----------------------------------------------------------------------------------

SELECT *
FROM DA.PREDMET
FOR UPDATE OF ESPB

UPDATE DA.PREDMET
SET ESPB = Y
WHERE ESPB = X