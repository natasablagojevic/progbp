SELECT P.NAZIV, DATDIPLOMIRANJA, OCENA
FROM DA.ISPIT I JOIN DA.PREDMET P ON I.IDPREDMETA = P.ID 
WHERE INDEKS = 20192045 AND OCENA > 5 AND STATUS = 'o';


SELECT COALESCE(AVG(0CENA+0.0), 5.0)
FROM DA.ISPIT 
WHERE INDEKS = 20192045 AND OCENA > 5 AND STATUS = 'o';


WITH POMOCNA AS ( -- PRVI ISPIT KOJI JE POLOZIO
  SELECT I.INDEKS, MIN(DATPOLAGANJA) AS DATUMPRVOG
  FROM DA.ISPIT I JOIN DA.DOISJE D ON I.INDEKS = D.INDEKS 
       JOIN DA.STUDIJSKIPROGRAM SP ON D.IDPROGRAMA = SP.ID  
  WHERE OCENA > 5 AND STATUS = 'o' AND SP.NAZIV = 'Informatika'
  GROUP BY I.INDEKS 
  HAVING MIN(DATPOLAGANJA) IS NOT NULL 
)
SELECT I.INDEKS, 
      (SELECT IME FROM DA.DOSIJE WHERE I.INDEKS = D.INDEKS), 
      (SELECT PREZIME FROM DA.DOSIJE WHERE I.INDEKS = D.INDEKS), 
      (SELECT NAZIV FROM DA.PREDMET P WHERE P.ID = I.IDPREDMETA) 
FROM DA.ISPIT I
WHERE EXISTS(
  SELECT *
  FROM POMOCNA PO 
  WHERE PO.INDEKS = I.INDEKS AND PO.DATUMPRVOG = I.DATPOLAGANJA
);